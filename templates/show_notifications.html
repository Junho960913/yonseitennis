{% load static %}
<style>
.notification-badge {
	transition: 0.3s;
}

.notification-badge:hover {
	cursor: pointer;
	opacity: 0.75;
	transition: 0.3s;
}
.dropdown {
	position: relative;
	display: inline-block;
}
.dropdown-content {
	position: absolute;
	background-color: #f1f1f1;
	min-width: 350px;
	box-shadow: 0px 8px 8px 0px rgba(0,0,0,0.2);
	z-index: 1;
	font-size: 0.9rem;
}
.dropdown-content a {
	color: #000;
	padding: 12px 16px;
	text-decoration: none;
	display: block;
}

.dropdown-content a:hover{
	background-color: #ddd;
}

.dropdown-item-parent {
	position: relative;
	display: block;
}

.dropdown-item-close {
	position: absolute;
	top: 0;
	right: 0;
	font-size: 1.8rem;
	padding-right: 5px;
	transition: 0.3s;
}
.dropdown-item-close:hover {
	color: rgb(180, 25, 25);
	transition: 0.3s;
	cursor: pointer;
}
</style>
<link rel="stylesheet" href="{% static 'css/base.css' %}">

<div class="dropdown" style="position: relative">
    <span class="badge bg-primary notification-badge" onclick="showNotification()">{{ notifications.count }}</span>
    <div class="dropdown-content d-none" id="notification-container" style="position: absolute; right: 0px; top: 30px ">
        {% for notification in notifications %}
            {% if notification.match %}
                <div class="dropdown-item-parent">
                    <a href="{% url 'notification-detail' notification.pk notification.match.pk %}">@{{ notification.from_user }}님이 경기 신청을 보냈습니다.</a>
                    <span class="dropdown-item-close" onclick="hideNotification()">&times;</span>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

<script>
    function showNotification() {
        const container = document.getElementById('notification-container');

        if (container.classList.contains('d-none')){
            container.classList.remove('d-none');
        }
        else{
            container.classList.add('d-none');
        }
    }

    function hideNotification() {
        const container = document.getElementById('notification-container');
        container.classList.add('d-none');
    }

</script>
